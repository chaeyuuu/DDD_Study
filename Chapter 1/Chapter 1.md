# Chapter 1. ë„ë©”ì¸ ëª¨ë¸ ì‹œì‘í•˜ê¸°

## ğŸ’­ ë„ë©”ì¸ì´ë€?

- **êµ¬í˜„í•´ì•¼ í• ** ì†Œí”„íŠ¸ì›¨ì–´ ëŒ€ìƒ

  ex) ì˜¨ë¼ì¸ ì„œì  -> ì±…ì„ íŒë§¤í•˜ëŠ” ë° í•„ìš”í•œ ìƒí’ˆ ì¡°íšŒ, êµ¬ë§¤, ê²°ì œ ë“±ì˜ ê¸°ëŠ¥ì„ ì œê³µ

- í•œ ë„ë©”ì¸ì€ í•˜ìœ„ ë„ë©”ì¸ìœ¼ë¡œ ë‚˜ëˆŒ ìˆ˜ ìˆìŒ

  ex) ì˜¨ë¼ì¸ ì„œì  ë„ë©”ì¸
  ![ë„ë©”ì¸ì€ ì—¬ëŸ¬ í•˜ìœ„ ë„ë©”ì¸ìœ¼ë¡œ êµ¬ì„±](image.png)

  - í•œ í•˜ìœ„ ë„ë©”ì¸ì€ ë‹¤ë¥¸ í•˜ìœ„ ë„ë©”ì¸ê³¼ ì—°ë™í•˜ì—¬ ì™„ì „í•œ ê¸°ëŠ¥ ì œê³µ

    ex) ê³ ê°ì´ ë¬¼ê±´ì„ êµ¬ë§¤í•˜ê²Œ ë˜ë©´ ì£¼ë¬¸, ê²°ì œ, ë°°ì†¡, í˜œíƒ í•˜ìœ„ ë„ë©”ì¸ì˜ ê¸°ëŠ¥ì´ ì—®ì´ê²Œ ë¨

  > ë„ë©”ì¸ë§ˆë‹¤ ê¼­ í•˜ìœ„ ë„ë©”ì¸ì´ ì¡´ì¬í•˜ëŠ” ê²ƒì€ ì•„ë‹ˆê³ , í•˜ìœ„ ë„ë©”ì¸ êµ¬ì„± ì—¬ë¶€ëŠ” ìƒí™©ì— ë”°ë¼ ë‹¬ë¼ì§

## ğŸ’­ ë„ë©”ì¸ ëª¨ë¸

- íŠ¹ì • ë„ë©”ì¸ì„ ê°œë…ì ìœ¼ë¡œ í‘œí˜„í•œ ê²ƒ

- ë„ë©”ì¸ ëª¨ë¸ì„ ì‚¬ìš©í•˜ë©´ ì—¬ëŸ¬ ì´í•´ê´€ê³„ìë“¤ì´ ë™ì¼í•œ ëª¨ìŠµìœ¼ë¡œ ë„ë©”ì¸ì„ ì´í•´ ê°€ëŠ¥

- ë„ë©”ì¸ ëª¨ë¸ì„ ê°ì²´ë¡œë§Œ ëª¨ë¸ë§ í•  ìˆ˜ ìˆëŠ” ê²ƒì€ ì•„ë‹˜ -> ë‹¤ì–‘í•œ ë‹¤ì´ì–´ê·¸ë¨ (ex: ìƒíƒœ ë‹¤ì´ì–´ê·¸ë¨ ë“±..) ì„ ì´ìš©í•´ì„œ ëª¨ë¸ë§ ê°€ëŠ¥

![ê°ì²´ë¥¼ ì´ìš©í•œ ë„ë©”ì¸ ëª¨ë¸](image-2.png)

- ê°ì²´ ëª¨ë¸ - ë„ë©”ì¸ì´ ì œê³µí•˜ëŠ” ê¸°ëŠ¥ê³¼ ë„ë©”ì¸ì˜ ì£¼ìš” ë°ì´í„° êµ¬ì„±ì„ íŒŒì•…í•˜ê¸° ì¢‹ìŒ

![ìƒíƒœ ë‹¤ì´ì–´ê·¸ë¨ ëª¨ë¸](image-3.png)

- ìƒíƒœ ë‹¤ì´ì–´ê·¸ë¨ ëª¨ë¸ - ë„ë©”ì¸ì˜ ìƒíƒœ ë³€ê²½ì„ íŒŒì•…í•˜ê¸° ì¢‹ìŒ

- UML í‘œê¸°ë²• (ex: í´ë˜ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨, ìƒíƒœ ë‹¤ì´ì–´ê·¸ë¨ ë“±.. )ë¿ë§Œ ì•„ë‹ˆë¼ ê·¸ë˜í”„ì™€ ê°™ì€ ë°©ì‹ì„ ì´ìš©í•´ì„œ ëª¨ë¸ë§í•  ìˆ˜ ìˆìŒ

> ë„ë©”ì¸ì— ë”°ë¼ ìš©ì–´ ì˜ë¯¸ê°€ ê²°ì •ë˜ê¸° ë•Œë¬¸ì— ì—¬ëŸ¬ í•˜ìœ„ ë„ë©”ì¸ì„ í•˜ë‚˜ì˜ ë‹¤ì´ì–´ê·¸ë¨ì— ëª¨ë¸ë§í•´ì„œëŠ” ì•ˆë¨

## ğŸ’­ ë„ë©”ì¸ ëª¨ë¸ íŒ¨í„´

- ì¼ë°˜ì ì¸ ì–´í”Œë¦¬ì¼€ì´ì…˜ì˜ ë„¤ ê°œì˜ ì˜ì—­
  ![ì•„í‚¤í…ì²˜ êµ¬ì„±](image-4.png)

> - **ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ (í‘œí˜„)** : ì‚¬ìš©ìì˜ ìš”ì²­ì„ ì²˜ë¦¬í•˜ê³  ì‚¬ìš©ìì—ê²Œ ì •ë³´ë¥¼ ë³´ì—¬ì¤Œ. ì´ë•Œ, ì‚¬ìš©ìëŠ” ì‚¬ëŒë¿ë§Œ ì•„ë‹ˆë¼ ì™¸ë¶€ ì‹œìŠ¤í…œë„ ê°€ëŠ¥
> - **ì‘ìš©** : ì‚¬ìš©ìê°€ ìš”ì²­í•œ ê¸°ëŠ¥ ì‹¤í–‰. ì—…ë¬´ ë¡œì§ êµ¬í˜„ ì—†ì´ ë„ë©”ì¸ ê³„ì¸µ ì¡°í•©í•´ì„œ ê¸°ëŠ¥ ì‹¤í–‰
> - **ë„ë©”ì¸**: ì‹œìŠ¤í…œì´ ì œê³µí•  ë„ë©”ì¸ ê·œì¹™ êµ¬í˜„
> - **ì¸í”„ë¼ìŠ¤íŠ¸ëŸ­ì²˜**: ë°ì´í„°ë² ì´ìŠ¤, ë©”ì‹œì§• ì‹œìŠ¤í…œê³¼ ê°™ì€ ì™¸ë¶€ ì‹œìŠ¤í…œê³¼ì˜ ì—°ë™ ì²˜ë¦¬

- ë„ë©”ì¸ ê³„ì¸µì€ ë„ë©”ì¸ì˜ í•µì‹¬ ê·œì¹™ì„ êµ¬í˜„
- ë„ë©”ì¸ ê·œì¹™ì„ ê°ì²´ ì§€í–¥ ê¸°ë²•ìœ¼ë¡œ êµ¬í˜„í•˜ëŠ” íŒ¨í„´ì´ **'ë„ë©”ì¸ ëª¨ë¸ íŒ¨í„´'**

- í•µì‹¬ ê·œì¹™ì„ êµ¬í˜„í•œ ì½”ë“œëŠ” ë„ë©”ì¸ ëª¨ë¸ì—ë§Œ ìœ„ì¹˜í•˜ê¸° ë•Œë¬¸ì— ê·œì¹™ì´ ë³€ê²½ë˜ê±°ë‚˜ í™•ì¥ë  ì‹œ, ë‹¤ë¥¸ ì½”ë“œì— ì˜í–¥ì„ ëœ ì¤„ê²Œë¨
  > **â• ê°œë… ëª¨ë¸**
  > : ìˆœìˆ˜í•˜ê²Œ ë¬¸ì œë¥¼ ë¶„ì„í•œ ê²°ê³¼ë¬¼ë¡œ, DBë‚˜ íŠ¸ëœì ì…˜ ì²˜ë¦¬, ì„±ëŠ¥ ë“±ì„ ê³ ë ¤í•˜ê³  ìˆì§€ ì•ŠìŒ.
  > ê°œë… ëª¨ë¸ì„ ë§Œë“¤ ë•Œ ì™„ë²½í•˜ê²Œ ë„ë©”ì¸ ëª¨ë¸ì„ ë§Œë“œëŠ” ê²ƒì€ ì‚¬ì‹¤ìƒ ë¶ˆê°€ëŠ¥ -> ì²˜ìŒë¶€í„° ì™„ë²½í•œ ê°œë… ëª¨ë¸ì„ ë§Œë“¤ê¸° ë³´ë‹¤ëŠ”, ì „ë°˜ì ì¸ ê°œìš”ë¥¼ íŒŒì•…í•  ìˆ˜ ìˆëŠ” ì •ë„ë¡œ í•˜ê³  ì ì§„ì ìœ¼ë¡œ êµ¬í˜„ëª¨ë¸ë¡œ ë°œì „ì‹œì¼œì•¼í•¨

## ğŸ’­ ë„ë©”ì¸ ëª¨ë¸ ë„ì¶•

ì£¼ë¬¸ ë„ë©”ì¸ê³¼ ê´€ë ¨ëœ ëª‡ ê°€ì§€ ìš”êµ¬ì‚¬í•­

1. ìµœì†Œí•œ ì¢…ë¥˜ ì´ìƒì˜ ìƒí’ˆì„ ì£¼ë¬¸í•´ì•¼ í•œë‹¤.
2. í•œ ìƒí’ˆì„ í•œ ê°œ ì´ìƒ ì£¼ë¬¸í•  ìˆ˜ ìˆë‹¤.
3. ì´ ì£¼ë¬¸ ê¸ˆì•¡ì€ ê° ìƒí’ˆì˜ êµ¬ë§¤ ê°€ê²© í•©ì„ ëª¨ë‘ ë”í•œ ê¸ˆì•¡ì´ë‹¤.
4. ê° ìƒí’ˆì˜ êµ¬ë§¤ ê°€ê²© í•©ì€ ìƒí’ˆ ê°€ê²©ì— êµ¬ë§¤ ê°œìˆ˜ë¥¼ ê³±í•œ ê°’ì´ë‹¤.
5. ì£¼ë¬¸í•  ë•Œ ë°°ì†¡ì§€ ì •ë³´ë¥¼ ë°˜ë“œì‹œ ì§€ì •í•´ì•¼ í•œë‹¤.
6. ë°°ì†¡ì§€ ì •ë³´ëŠ” ë°›ëŠ” ì‚¬ëŒ ì´ë¦„, ì „í™”ë²ˆí˜¸, ì£¼ì†Œë¡œ êµ¬ì„±ëœë‹¤.
7. ì¶œê³ ë¥¼ í•˜ë©´ ë°°ì†¡ì§€ë¥¼ ë³€ê²½í•  ìˆ˜ ì—†ë‹¤.
8. ì¶œê³  ì „ì— ì£¼ë¬¸ì„ ì·¨ì†Œí•  ìˆ˜ ìˆë‹¤.
9. ê³ ê°ì´ ê²°ì œë¥¼ ì™„ë£Œí•˜ê¸° ì „ì—ëŠ” ìƒí’ˆì„ ì¤€ë¹„í•˜ì§€ ì•ŠëŠ”ë‹¤.

ìœ„ ìš”êµ¬ì‚¬í•­ì—ì„œ ì£¼ë¬¸ì€ 'ì¶œê³  ìƒíƒœë¡œ ë³€ê²½í•˜ê¸°', 'ë°°ì†¡ì§€ ë³€ê²½í•˜ê¸°', 'ì£¼ë¬¸ ì·¨ì†Œí•˜ê¸°', 'ê²°ì œ ì™„ë£Œí•˜ê¸°' ê¸°ëŠ¥ì„ ì œê³µí•œë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆìŒ

```java
public class Order {
    public void changeShipped() {...}
    public void changeShippingInfo(ShippingInfo newShipping) {...}
    public void cancel() {...}
    public void completePayment() {...}
}
```

ë‹¤ìŒ ìš”êµ¬ì‚¬í•­ì€ 'ì£¼ë¬¸ í•­ëª©'ì´ ì–´ë–¤ ë°ì´í„°ë¡œ êµ¬ì„±ë˜ëŠ”ì§€ ì•Œë ¤ì¤Œ

- í•œ ìƒí’ˆì„ í•œ ê°œ ì´ìƒ ì£¼ë¬¸í•  ìˆ˜ ìˆë‹¤.
- ê° ìƒí’ˆì˜ êµ¬ë§¤ ê°€ê²© í•©ì€ ìƒí’ˆ ê°€ê²©ì— êµ¬ë§¤ ê°œìˆ˜ë¥¼ ê³±í•œ ê°’ì´ë‹¤.

-> 'ì£¼ë¬¸ í•­ëª©'ì„ í‘œí˜„í•˜ëŠ” **_OrderLine_**ì€ ìµœì†Œí•œ ì£¼ë¬¸í•  ìƒí’ˆ, ìƒí’ˆì˜ ê°€ê²©, êµ¬ë§¤ ê°œìˆ˜, ê° êµ¬ë§¤ í•­ëª©ì˜ êµ¬ë§¤ ê°€ê²©ì„ í¬í•¨í•´ì•¼í•¨

- OrderLineì€ í•œ ìƒí’ˆ(product)ì„ ì–¼ë§ˆì—(price) ëª‡ ê°œ ì‚´ì§€(quantity)ë¥¼ ë‹´ê³  ìˆê³  calculateAmounts() ë©”ì„œë“œë¡œ êµ¬ë§¤ê°€ê²©ì„ êµ¬í•˜ëŠ” ë¡œì§ì„ êµ¬í˜„í•˜ê³  ìˆìŒ

```java
public class OrderLine {
	private Product product;
	private int price;
	private int quantity;
	private int amounts;

	public OrderLine(Product product, int price, int quantity) {
		this.product = product;
		this.price = price;
		this.quantity = quantity;
		this.amounts = calculateAmounts();
	}

	private int calculateAmounts() {
		return price * quantity;
	}
	...
}
```

ë‹¤ìŒ ìš”êµ¬ì‚¬í•­ì€ Orderì™€ OrderLineì˜ ê´€ê³„ë¥¼ ì•Œë ¤ì¤Œ

- ìµœì†Œí•œ ì¢…ë¥˜ ì´ìƒì˜ ìƒí’ˆì„ ì£¼ë¬¸í•´ì•¼ í•œë‹¤.
- ì´ ì£¼ë¬¸ ê¸ˆì•¡ì€ ê° ìƒí’ˆì˜ êµ¬ë§¤ ê°€ê²© í•©ì„ ëª¨ë‘ ë”í•œ ê¸ˆì•¡ì´ë‹¤.

```java
public class Order {
	private List<OrderLine> orderLines;
	private Money totalAmounts;

	public Order(List<OrderLine > orderLines) {
		setOrderLines(orderLines);
	}

	private void setOrderLines(List<OrderLine > orderLines) {
		verifyAtLeastOne0rMore0rderLines(orderLines);
		this.orderLines = orderLines;
		calculateTotalAmounts();
	}

	private void verifyAtLeastOneOrMoreOrderLines(List<OrderLine> orderLines) {
		if (orderLines == null || orderLines.isEmpty()) {
		throw new IllegalArgumentException("no OrderLine");
		}
	}

	private void calculateTotalAmounts() {
	int sum = orderLines.stream()
            .mapToInt (x -> x.getAmounts())
            .sum();
	this.totalAmounts = new Money(sum);
	}
}
```

- Orderì€ í•œ ê°œ ì´ìƒì˜ OrderLineì„ ê°€ì§ˆ ìˆ˜ ìˆìœ¼ë¯€ë¡œ Orderë¥¼ ìƒì„±í•  ë•Œ OrderLine ëª©ë¡ì„ Listë¡œ ì „ë‹¬
- ìƒì„±ìì—ì„œ í˜¸ì¶œí•˜ëŠ” `setOrderLines()` ë©”ì„œë“œëŠ” ìš”êµ¬ì‚¬í•­ì— ì •ì˜í•œ ì œì•½ ì¡°ê±´ì„ ê²€ì‚¬í•¨
- ìš”êµ¬ì‚¬í•­ì— ë”°ë¥´ë©´ ìµœì†Œ í•œ ì¢…ë¥˜ ì´ìƒì˜ ìƒí’ˆì„ ì£¼ë¬¸í•´ì•¼í•¨ -> `verifyAtLeastOne0rMore0rderLines()` ë©”ì„œë“œë¥¼ ì´ìš©í•´ì„œ OrderLineì´ í•œ ê°œ ì´ìƒ ì¡´ì¬í•˜ëŠ”ì§€ ê²€ì‚¬
- `calculateTotalAmounts()` ë©”ì„œë“œë¥¼ ì´ìš©í•´ì„œ ì´ ì£¼ë¬¸ ê¸ˆì•¡ ê³„ì‚°

ë°°ì†¡ì§€ ì •ë³´ëŠ” ì´ë¦„, ì „í™”ë²ˆí˜¸, ì£¼ì†Œ ë°ì´í„°ë¥¼ ê°€ì§€ë¯€ë¡œ ShippingInfo í´ë˜ìŠ¤ë¥¼ ë‹¤ìŒê³¼ ê°™ì´ ì •ì˜ ê°€ëŠ¥

```java
public class ShippingInfo {
	private String receiverName;
	private String receiverPhoneNumber;
	private String shippingAddress1;
	private String shippingAddress2;
	private String shippingZipcode;

	... ìƒì„±ì,getter
}
```

'5. ì£¼ë¬¸í•  ë•Œ ë°°ì†¡ì§€ ì •ë³´ë¥¼ ë°˜ë“œì‹œ ì§€ì •í•´ì•¼ í•œë‹¤.' ë¼ëŠ” ìš”êµ¬ì‚¬í•­ì„ í† ëŒ€ë¡œ Orderë¥¼ ìƒì„±í•  ë•Œ OrderLineì˜ ëª©ë¡ë¿ë§Œ ì•„ë‹ˆë¼ ShippingInfoë„ í•¨ê»˜ ì „ë‹¬í•´ì•¼í•¨ -> ìƒì„±ìì— ë°˜ì˜

```java
public class Order {
	private List<OrderLine> orderLines;
	private ShippingInfo shippingInfo;
	...

	public Order(List<OrderLine > orderLines, ShippingInfo shippingInfo) {
		setOrderLines(orderLines);
		setShippingInfo(shippingInfo);
	}

	private void setShippingInfo(ShippingInfo shippingInfo) {
		if (shippingInfo == null)
			throw new IllegalArgumentException("no ShippingInfo");
		this.shippingInfo = shippingInfo;
	}
	...
}
```

ìƒì„±ìì—ì„œ í˜¸ì¶œí•˜ëŠ” `setShippingInfo()` ë©”ì„œë“œëŠ” ShippingInfoê°€ Nullì´ë©´ ìµì…‰ì…˜ì´ ë°œìƒ -> 'ë°°ì†¡ì§€ ì •ë³´ í•„ìˆ˜'ë¼ëŠ” ë„ë©”ì¸ ê·œì¹™ êµ¬í˜„

ë„ë©”ì¸ì„ êµ¬í˜„í•˜ë‹¤ ë³´ë©´ íŠ¹ì • ì¡°ê±´ì´ë‚˜ ìƒíƒœì— ë”°ë¼ ì œì•½ì´ë‚˜ ê·œì¹™ì´ ë‹¬ë¦¬ ì ìš©ë˜ëŠ” ê²½ìš°ê°€ ë§ìŒ. ì£¼ë¬¸ ìš”êµ¬ì‚¬í•­ì—ì„œëŠ” ë‹¤ìŒê³¼ ê°™ì€ ë‚´ìš©ì´ ì œì•½ê³¼ ê·œì¹™ì— í•´ë‹¹

- ì¶œê³ ë¥¼ í•˜ë©´ ë°°ì†¡ì§€ ì •ë³´ë¥¼ ë³€ê²½í•  ìˆ˜ ì—†ë‹¤.
- ì¶œê³  ì „ì— ì£¼ë¬¸ì„ ì·¨ì†Œí•  ìˆ˜ ìˆë‹¤.
- ê³ ê°ì´ ê²°ì œë¥¼ ì™„ë£Œí•˜ê¸° ì „ì—ëŠ” ìƒí’ˆì„ ì¤€ë¹„í•˜ì§€ ì•ŠëŠ”ë‹¤.

ìœ„ ìš”êµ¬ì‚¬í•­ì€ ìƒíƒœì— ë”°ë¼ ë‹¤ë¥¸ ì œì•½ ì‚¬í•­ë“¤ì„ ì•Œë ¤ì¤Œ. ë‹¤ìŒê³¼ ê°™ì€ ì—´ê±° íƒ€ì…ì„ í™œìš©í•´ì„œ ìƒíƒœ ì •ë³´ í‘œí˜„ ê°€ëŠ¥

```java
public enum OrderState {
	PAYMENT_WAITING, PREPARING, SHIPPED, DELIVERING, DELIVERY_COMPLETED,
	CANCELED;
}
```

ë°°ì†¡ì§€ ë³€ê²½ì´ë‚˜ ì£¼ë¬¸ ì·¨ì†Œ ê¸°ëŠ¥ì€ ì¶œê³  ì „ì—ë§Œ ê°€ëŠ¥í•˜ë‹¤ëŠ” ì œì•½ ê·œì¹™ ì ìš©ì„ ìœ„í•´ `changeShippingInfo()`ì™€ `cancel()`ì€ `verifyNotYetShipped()` ë©”ì„œë“œë¥¼ ë¨¼ì € ì‹¤í–‰

```java
public class Order {
	private OrderState state;

	public void changeShippingInfo(ShippingInfo newShippingInfo) {
		verifyNotYetShipped();
		setShippingInfo(newShippingInfo);
	}

	public void cancel() {
		verifyNotYetShipped();
		this.state = OrderState.CANCELED;
	}

	private void verifyNotYetShipped() {
		if (state != OrderState.PAYMENT WAITING && state != OrderState.PREPARING)
			throw new IllegalStateException("aleady shipped");
	}
	...
}
```

> ë©”ì„œë“œ ì´ë¦„ ë˜í•œ ë„ë©”ì¸ì„ ë” ì˜ íŒŒì•…í•˜ê²Œ ë˜ë©´ì„œ êµ¬ì²´ì ì¸ ì˜ë¯¸ë¥¼ íŒŒì•…í•  ìˆ˜ ìˆë„ë¡ ë³€ê²½

## ğŸ’­ ì—”í‹°í‹°ì™€ ë²¨ë¥˜

ë„ì¶œí•œ ëª¨ë¸ì€ ì—”í‹°í‹°ì™€ ë²¨ë¥˜ë¡œ êµ¬ë¶„í•  ìˆ˜ ìˆìŒ
![ì—”í‹°í‹°ì™€ ë²¨ë¥˜ ì¡´ì¬](image-5.png)

- ì—”í‹°í‹°ì™€ ë²¨ë¥˜ë¥¼ ì œëŒ€ë¡œ êµ¬ë¶„í•´ì•¼ ë„ë©”ì¸ì„ ì˜¬ë°”ë¥´ê²Œ ì„¤ê³„í•˜ê³  êµ¬í˜„í•  ìˆ˜ ìˆìŒ

### ğŸ‘€ ì—”í‹°í‹°

- ê°€ì¥ í° íŠ¹ì§•ì€ ì‹ë³„ìë¥¼ ì§€ë‹˜
- ì‹ë³„ìëŠ” ì—”í‹°í‹° ê°ì²´ë§ˆë‹¤ ê³ ìœ í•˜ê¸° ë•Œë¬¸ì— ê° ì—”í‹°í‹°ëŠ” ì„œë¡œ ë‹¤ë¥¸ ì‹ë³„ìë¥¼ ê°€ì§
  ex) ì£¼ë¬¸ ë„ë©”ì¸ì—ì„œ ê° ì£¼ë¬¸ì€ ì£¼ë¬¸ ë²ˆí˜¸ë¥¼ ê°€ì§€ê³  ìˆìŒ. ì´ ì£¼ë¬¸ ë²ˆí˜¸ëŠ” ê° ì£¼ë¬¸ë§ˆë‹¤ ì„œë¡œ ë‹¤ë¦„ -> ì£¼ë¬¸ë²ˆí˜¸ê°€ ì£¼ë¬¸ì˜ ì‹ë³„ìê°€ ë¨

  ![alt text](image-6.png)
  : Orderê°€ ì—”í‹°í‹°ê°€ ë˜ë©° ì£¼ë¬¸ë²ˆí˜¸ë¥¼ ì†ì„±ìœ¼ë¡œ ê°€ì§€ê²Œ ë¨

- ì—”í‹°í‹°ë¥¼ ìƒì„±í•˜ê³  ì†ì„±ì„ ë°”ê¾¸ê³  ì‚­ì œí•  ë•Œê¹Œì§€ ì‹ë³„ìëŠ” ë°”ë€Œì§€ ì•Šê³  ìœ ì§€ë¨

  - ì—”í‹°í‹°ë¥¼ êµ¬í˜„í•œ í´ë˜ìŠ¤ëŠ” ë‹¤ìŒê³¼ ê°™ì´ ì‹ë³„ìë¥¼ ì´ìš©í•´ì„œ equals(), hashCode() ë©”ì„œë“œ êµ¬í˜„ ê°€ëŠ¥

  ```java
  public class Order {
  private String orderNumber;

  @Override
  public boolean equals(Object obj) {
  	if (this == obj) return true;
  	if (obj== null) return false;
  	if (obj.getClass0 != Order.class) return false;
  	Order other = (Order)obj;
  	if (this.orderNumber = = null) return false;
  	return this.orderNumber.equals(other.orderNumber);
    }

  @Override
  public int hashCode() {
  	final int prime = 31;
  	int result = 1;
  	result = prime * result + ((orderNumber == null) ? 0 : orderNumber .hashCode);
  	return result;
      }
  }
  ```

### ğŸ‘€ ì—”í‹°í‹°ì˜ ì‹ë³„ì ìƒì„±

- ì—”í‹°í‹°ì˜ ì‹ë³„ìë¥¼ ìƒì„±í•˜ëŠ” ì‹œì ì€ ë„ë©”ì¸ íŠ¹ì§•ê³¼ ì‚¬ìš©í•˜ëŠ” ê¸°ìˆ ì— ë”°ë¼ ë‹¬ë¼ì§.

  - íŠ¹ì • ê·œì¹™ì— ë”°ë¼ ìƒì„±

    - ì£¼ë¬¸ë²ˆí˜¸, ìš´ì†¡ì¥ë²ˆí˜¸, ì¹´ë“œë²ˆí˜¸ì™€ ê°™ì€ ì‹ë³„ìëŠ” íŠ¹ì • ê·œì¹™ì— ë”°ë¼ ìƒì„±
    - ë„ë©”ì¸ì— ë”°ë¼ ë‹¤ë¥´ê³  ê°™ì€ ì£¼ë¬¸ë²ˆí˜¸ë¼ë„ íšŒì‚¬ë§ˆë‹¤ ë‹¤ë¥¸
      ex) ë‘ ì˜¨ë¼ì¸ ì„œì ì—ì„œ êµ¬ë§¤í•œ ì±…ì˜ ì£¼ë¬¸ë²ˆí˜¸ëŠ” ê°ê° '2021112831728OOOO' ì™€ '001-A88277OOOO'
    - í”íˆ ì‚¬ìš©í•˜ëŠ” ê·œì¹™ì€ í˜„ì¬ ì‹œê°„ê³¼ ë‹¤ë¥¸ ê°’ì„ í•¨ê»˜ ì¡°í•©
      - ì£¼ì˜í•´ì•¼í•  ì ì€ ê°™ì€ ì‹œê°„ì— ë™ì‹œì— ì‹ë³„ìë¥¼ ìƒì„±í•´ë„ ê°™ì€ ì‹ë³„ìê°€ ë§Œë“¤ì–´ì ¸ì„œëŠ” ì•ˆë¨

  - UUID(universally unique identifier)ë‚˜ Nano IDì™€ ê°™ì€ ê³ ìœ  ì‹ë³„ì ìƒì„±ê¸° ì‚¬ìš©

    - ë‹¤ìˆ˜ì˜ ê°œë°œ ì–¸ì–´ê°€ UUID ìƒì„±ê¸° ì œê³µ
      ex) ìë°”ëŠ” java.util.UUID í´ë˜ìŠ¤ ì‚¬ìš©

      ```java
      UUID uuid = UUID.randomUUID();

      //613f2sd-c3212-4sfds9sd-2313-ds1233ê³¼ ê°™ì€ í˜•ì‹ ë¬¸ìì—´
      String strUuid = uuid.toString0;
      ```

    - ê°’ì„ ì§ì ‘ ì…ë ¥

      - íšŒì›ì˜ ì•„ì´ë””ë‚˜ ì´ë©”ì¼ê³¼ ê°™ì€ ì‹ë³„ìëŠ” ê°’ì„ ì§ì ‘ ì…ë ¥
      - ì‚¬ìš©ìê°€ ì§ì ‘ ì…ë ¥í•˜ëŠ” ê°’ì€ ì‹ë³„ìë¥¼ ì¤‘ë³µí•´ì„œ ì…ë ¥í•˜ì§€ ì•Šë„ë¡ ì‚¬ì „ì— ë°©ì§€í•˜ëŠ” ê²ƒì´ ì¤‘ìš”

    - ì¼ë ¨ë²ˆí˜¸ ì‚¬ìš© (ì‹œí€€ìŠ¤ë‚˜ DBì˜ ìë™ ì¦ê°€ ì¹¼ëŸ¼ ì‚¬ìš©)

      - ì£¼ë¡œ ë°ì´í„°ë² ì´ìŠ¤ê°€ ì œê³µí•˜ëŠ” ìë™ ì¦ê°€ ê¸°ëŠ¥ ì‚¬ìš©
        ex) ì˜¤ë¼í´ - ì‹œí€€ìŠ¤ / MySQL - ìë™ ì¦ê°€ ì¹¼ëŸ¼
      - ìë™ ì¦ê°€ ì¹¼ëŸ¼ì„ ì œì™¸í•œ ë‹¤ë¥¸ ë°©ì‹ì€ ì‹ë³„ìë¥¼ ë¨¼ì € ë§Œë“¤ê³  ì—”í‹°í‹° ê°ì²´ë¥¼ ìƒì„±í•  ë•Œ ì‹ë³„ì ì „ë‹¬
        -> ìë™ ì¦ê°€ ì¹¼ëŸ¼ì˜ ê²½ìš°, DBí…Œì´ë¸”ì— ë°ì´í„°ë¥¼ ì‚½ì…í•´ì•¼ ê°’ì„ ì•Œ ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ê·¸ ì „ê¹Œì§€ëŠ” ëª¨ë¦„. ë”°ë¼ì„œ **ì—”í‹°í‹° ê°ì²´ë¥¼ ìƒì„±í•  ë•Œ ì‹ë³„ìë¥¼ ì „ë‹¬í•  ìˆ˜ ì—†ìŒì„ ì˜ë¯¸**

            ```java
            Article article = new Article(author, title, ...);
            articleRepository.save(article); // DBì— ì €ì¥í•œ ë’¤ êµ¬í•œ ì‹ë³„ìë¥¼ ì—”í‹°í‹°ì— ë°˜ì˜
            Long savedArticleId = article.getId(); //DBì— ì €ì¥í•œ í›„ ì‹ë³„ì ì°¸ì¡° ê°€ëŠ¥
            ```

### ğŸ‘€ ë²¨ë¥˜ íƒ€ì…

![alt text](image-7.png)

ShippingInfo í´ë˜ìŠ¤ëŠ” ë°›ëŠ” ì‚¬ëŒê³¼ ì£¼ì†Œì— ëŒ€í•œ ë°ì´í„°ë¥¼ ê°€ì§€ê³  ìˆìŒ. receiverNameí•„ë“œì™€ receiverPhoneNumber í•„ë“œëŠ” ê°œë…ì ìœ¼ë¡œ ë°›ëŠ” ì‚¬ëŒ ì˜ë¯¸

- ë²¨ë¥˜ íƒ€ì…ì€ **ê°œë…ì ìœ¼ë¡œ ì™„ì „í•œ í•˜ë‚˜ë¥¼ í‘œí˜„**í•  ë•Œ ì‚¬ìš©
  ex) ì‚¬ëŒì„ ìœ„í•œ ë²¨ë¥˜ íƒ€ì…ì¸ Receiverë¥¼ ë‹¤ìŒê³¼ ê°™ì´ ì‘ì„± ê°€ëŠ¥

```java
public class Receiver {
	private String name;
	private String phoneNumber;

	public Receiver(String name, String phoneNumber) {
		this.name = name;
		this.phoneNumber= phoneNumber;
	}

	public String getName() {
		return name;
	}

	public String getPhoneNumber() {
		return phoneNumber;
	}
}
```

- ReceiverëŠ” ë°›ëŠ” ì‚¬ëŒì´ë¼ëŠ” ë„ë©”ì¸ ê°œë… í‘œí˜„
- ë²¨ë¥˜ íƒ€ì…ì„ ì‚¬ìš©í•¨ìœ¼ë¡œì¨ ê°œë…ì ìœ¼ë¡œ ì™„ì „í•œ í•˜ë‚˜ë¥¼ ì˜ í‘œí˜„í•  ìˆ˜ ìˆìŒ

- ë²¨ë¥˜ íƒ€ì…ì„ ì´ìš©í•´ì„œ ShippingInfo í´ë˜ìŠ¤ë¥¼ ë‹¤ì‹œ êµ¬í˜„í•´ë³´ë©´ ë°°ì†¡ì •ë³´ê°€ ë°›ëŠ” ì‚¬ëŒê³¼ ì£¼ì†Œë¡œ êµ¬ì„±ëœë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆìŒ

- ë²¨ë¥˜ íƒ€ì…ì´ ê¼­ ë‘ ê°œ ì´ìƒì˜ ë°ì´í„°ë¥¼ ê°€ì ¸ì•¼í•˜ëŠ” ê²ƒì€ ì•„ë‹˜

  ```java
  public class OrderLine {
    private Product product;
    private int price;
    private int quantity;
    private int amounts;
    }
    ...
  ```

  - OrderLineì˜ pricedì™€ amountëŠ” int íƒ€ì…ì˜ ìˆ«ìë¥¼ ì‚¬ìš©í•˜ê³  ìˆì§€ë§Œ 'ëˆ'ì„ ì˜ë¯¸í•¨
  - 'ëˆ'ì„ ì˜ë¯¸í•˜ëŠ” Money íƒ€ì…ì„ ë§Œë“¤ì–´ ì‚¬ìš©

  ```java
  public class Money {
  private int value;

  public Money(int value) {
  	this.value = value;
  }

  public int getValue() {
  	return this.value;
  }
  }
  ```

  ```java
    public class OrderLine {
  private Product product;
  private Money price;
  private int quantity;
  private Money amounts;
    ...
    }
  ```

  -> Moeny íƒ€ì… ë•ì— priceë‚˜ amountsê°€ ê¸ˆì•¡ì„ ì˜ë¯¸í•œë‹¤ëŠ” ê²ƒì„ ì‰½ê²Œ ì•Œ ìˆ˜ ìˆìŒ

- ë˜ ë‹¤ë¥¸ ì¥ì ì€ ë°¸ë¥˜ íƒ€ì…ì„ ìœ„í•œ ê¸°ëŠ¥ì„ ì¶”ê°€í•  ìˆ˜ ìˆìŒ

ex) Money íƒ€ì…ì€ ëˆ ê³„ì‚°ì„ ìœ„í•œ ê¸°ëŠ¥ì„ ì¶”ê°€í•  ìˆ˜ ìˆìŒ

```java
public class Money {
	private int value;

	... ìƒì„±ì, getValue()

	public Money add (Money money) {
		return new Money(this.value + money.value);
	}

	public Money multiply(int multiplier) {
	return new Money(value * multiplier);
	}
  }
```

- ë°¸ë¥˜ ê°ì²´ì˜ ë°ì´í„°ë¥¼ ë³€ê²½í•  ë•ŒëŠ” ê¸°ì¡´ ë°ì´í„°ë¥¼ ë³€ê²½í•˜ëŠ” ë°©ì‹ë³´ë‹¤ëŠ” ë³€ê²½í•œ ë°ì´í„°ë¥¼ ê°–ëŠ” ìƒˆë¡œìš´ ë°¸ë¥˜ ê°ì²´ë¥¼ ìƒì„±í•˜ëŠ” ë°©ì‹ì„ ì„ í˜¸

ex) Money í´ë˜ìŠ¤ì˜ add() ë©”ì„œë“œëŠ” Moenyë¥¼ ìƒˆë¡œ ìƒì„±í•˜ê³  ìˆìŒ

- ë°ì´í„° ë³€ê²½ ê¸°ëŠ¥ì„ ì œê³µí•˜ì§€ ì•ŠëŠ” íƒ€ì…ì„ 'ë¶ˆë³€'ì´ë¼ê³  í•¨

  - ë¶ˆë³€ìœ¼ë¡œ êµ¬í˜„í•˜ë©´ ì•ˆì „í•œ ì½”ë“œë¥¼ ì‘ì„± ê°€ëŠ¥í•¨

  ex) OrderLineì„ ìƒì„±í•˜ë ¤ë©´ Money ê°ì²´ë¥¼ ì „ë‹¬í•´ì•¼í•¨

  ```java
  Money price = ...;
  OrderLine line = new OrederLine(product, price, quantity);
  // ë§Œì•½ price.setValue(0)ë¡œ ê°’ì„ ë³€ê²½í•  ìˆ˜ ìˆë‹¤ë©´?
  ```

  ë§Œì•½ ì´ ê²½ìš° Moneyê°€ setValue()ì™€ ê°™ì€ ë©”ì„œë“œë¥¼ ì œê³µí•´ì„œ ê°’ì„ ë³€ê²½í•œë‹¤ë©´ OrderLineì˜ price ê°’ì´ ì˜ëª» ë°˜ì˜ë˜ëŠ” ìƒí™©ì´ ë°œìƒ

  -> ë”°ë¼ì„œ OrderLine ìƒì„±ìëŠ” ì•„ë˜ì™€ ê°™ì´ ìƒˆë¡œìš´ Money ê°ì²´ë¥¼ ìƒì„±í•˜ë„ë¡ ì½”ë“œë¥¼ ì‘ì„±í•´ì•¼í•¨

  ```java
  public class OrderLine {
  ...
  private Money price;

  public OrderLine(Product product, Moeny price, int quantity){
      this.product = product;
      // Moneyê°€ ë¶ˆë³€ ê°ì²´ê°€ ì•„ë‹ˆë¼ë©´ price íŒŒë¼ë¯¸í„°ê°€ ë³€ê²½ë  ë•Œ ë°œìƒí•˜ëŠ” ë¬¸ì œë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•´ ë°ì´í„°ë¥¼ ë³µì‚¬í•œ ìƒˆë¡œìš´ ê°ì²´ë¥¼ ìƒì„±í•´ì•¼í•¨
      this.price = new Moeny(price.getValue());
      this.quantity = quantity;
      this.amounts = calculateAmounts();
  }
  }
  ```

### ğŸ‘€ ì—”í‹°í‹° ì‹ë³„ìì™€ ë°¸ë¥˜ íƒ€ì…

- ì—”í‹°í‹° ì‹ë³„ìì˜ ì‹¤ì œ ë°ì´í„°ëŠ” Stringê³¼ ê°™ì€ ë¬¸ìì—´ë¡œ êµ¬ì„±ëœ ê²½ìš°ê°€ ë§ìŒ
- Moenyê°€ ë‹¨ìˆœ ìˆ«ìê°€ ì•„ë‹Œ ë„ë©”ì¸ì˜ 'ëˆ'ì„ ì˜ë¯¸í•˜ëŠ” ê²ƒì²˜ëŸ¼ ì‹ë³„ìë¥¼ ìœ„í•œ ë°¸ë¥˜ íƒ€ì…ì„ ì‚¬ìš©í•´ì„œ ì˜ë¯¸ê°€ ì˜ ë“œëŸ¬ë‚˜ê²Œ í•  ìˆ˜ ìˆìŒ

ex) ì£¼ë¬¸ë²ˆí˜¸ í‘œí˜„ì„ ìœ„í•´ Orderì˜ ì‹ë³„ì íƒ€ì…ì„ String ëŒ€ì‹  OrderNo ë°¸ë¥˜ íƒ€ì…ì„ ì‚¬ìš© -> í•´ë‹¹ í•„ë“œê°€ ì£¼ë¬¸ë²ˆí˜¸ë¼ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆìŒ

```java
public class Order {
	//OrderNo íƒ€ì… ìì²´ë¡œ idê°€ ì£¼ë¬¸ë²ˆí˜¸ì„ì„ ì•Œ ìˆ˜ ìˆë‹¤.
	private OrderNo id;
	...
	public OrderNo getId() {
		return id;
    }
}
```

### ğŸ‘€ ë„ë©”ì¸ ëª¨ë¸ì— set ë©”ì„œë“œ ë„£ì§€ ì•Šê¸°

- set ë©”ì„œë“œëŠ” ë„ë©”ì¸ì˜ í•µì‹¬ ê°œë…ì´ë‚˜ ì˜ë„ë¥¼ ì½”ë“œì—ì„œ ì‚¬ë¼ì§€ê²Œí•¨
  - set ë©”ì„œë“œëŠ” í•„ë“œê°’ë§Œ ë³€ê²½í•˜ê³  ìƒíƒœ ë³€ê²½ê³¼ ê´€ë ¨ëœ ë„ë©”ì¸ ì§€ì‹ì´ ì½”ë“œì—ì„œ ì‚¬ë¼ì§€ê²Œ ë¨
- set ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ë©´ ë„ë©”ì¸ ê°ì²´ë¥¼ ìƒì„±í•  ë•Œ ì˜¨ì „í•˜ì§€ ì•Šì€ ìƒíƒœê°€ ë  ìˆ˜ ìˆìŒ

- ë„ë©”ì¸ ê°ì²´ê°€ ë¶ˆì™„ì „í•œ ìƒíƒœë¡œ ì‚¬ìš©ë˜ëŠ” ê²ƒì„ ë§‰ìœ¼ë ¤ë©´ ìƒì„± ì‹œì ì— í•„ìš”í•œ ê²ƒì„ ì „ë‹¬í•´ ì£¼ì–´ì•¼í•¨. ì¦‰, **ìƒì„±ìë¥¼ í†µí•´ í•„ìš”í•œ ë°ì´í„°ë¥¼ ëª¨ë‘ ë°›ì•„ì•¼í•¨**

```java
Order order = new Order(orderer, lines, shippingInfo, OrderState.PREPARING);
```

- ìƒì„±ìë¡œ í•„ìš”í•œ ê²ƒì„ ëª¨ë‘ ë°›ìœ¼ë©´ ìƒì„±ìë¥¼ í˜¸ì¶œí•˜ëŠ” ì‹œì ì— í•„ìš”í•œ ë°ì´í„°ê°€ ì˜¬ë°”ë¥¸ì§€ ê²€ì‚¬ ê°€ëŠ¥

- set ë©”ì„œë“œê°€ privateì´ë¼ë©´ ì™¸ë¶€ì—ì„œ ë°ì´í„°ë¥¼ ë³€ê²½í•  ëª©ì ìœ¼ë¡œ set ë©”ì„œë“œë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ìŒ
- set ë©”ì„œë“œë¥¼ êµ¬í˜„í•´ì•¼í•  íŠ¹ë³„í•œ ì´ìœ ê°€ ì—†ë‹¤ë©´ ë¶ˆë³€ íƒ€ì…ì˜ ì¥ì ì„ ì‚´ë¦´ ìˆ˜ ìˆë„ë¡ ë°¸ë¥˜ íƒ€ì…ì€ **ë¶ˆë³€**ìœ¼ë¡œ êµ¬í˜„

## ğŸ’­ ë„ë©”ì¸ ìš©ì–´ì™€ ìœ ë¹„ì¿¼í„°ìŠ¤ ìš©ì–´

- ì½”ë“œë¥¼ ì‘ì„±í•  ë•Œ ë„ë©”ì¸ì—ì„œ ì‚¬ìš©í•˜ëŠ” ìš©ì–´ëŠ” ë§¤ìš° ì¤‘ìš”í•¨

- ë„ë©”ì¸ì—ì„œ ì‚¬ìš©í•˜ëŠ” ìš©ì–´ë¥¼ ì½”ë“œì— ë°˜ì˜í•˜ì§€ ì•Šìœ¼ë©´ í•´ë‹¹ ì½”ë“œëŠ” ê°œë°œìì—ê²Œ ì½”ë“œì˜ ì˜ë¯¸ë¥¼ í•´ì„í•´ì•¼ í•˜ëŠ” ë¶€ë‹´ì„ ì¤Œ

```java
public OrderState {
	STEP1, STEP2, STEP3, STEP4, STEP5, STEP6
}
```

í•´ë‹¹ ì½”ë“œì˜ ì˜ë¯¸ë¥¼ ì´í•´í•˜ë ¤ë¨¼ STEP1, STEP2 ë“±ì´ ê°ê° ì–´ë–¤ ìƒíƒœì¸ì§€ í•´ì„ì´ í•„ìš”í•¨

```java
public enum OrderState {
	PAYMENT_WAITING, PREPARING, SHIPPED, DELIVERING, DELIVERY_COMPLETED;
}
```

ìœ„ì™€ ê°™ì´ ë„ë©”ì¸ ìš©ì–´ë¥¼ ì‚¬ìš©í•´ì„œ OrderStateë¥¼ êµ¬í˜„í•˜ë©´ í•´ì„ ê³¼ì •ì´ ì¤„ì–´ë“¬

> ì•Œë§ì€ ì˜ë‹¨ì–´ë¥¼ ì°¾ëŠ” ê²ƒì´ ì‰½ì§€ëŠ” ì•Šì§€ë§Œ ì‹œê°„ì„ ë“¤ì—¬ ì°¾ëŠ” ë…¸ë ¥ì„ í•´ì•¼í•¨. **ë„ë©”ì¸ ìš©ì–´ì— ì•Œë§ì€ ë‹¨ì–´ë¥¼ ì°¾ëŠ” ì‹œê°„ì„ ì•„ê¹Œì›Œí•˜ì§€ ë§ì**
